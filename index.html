<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">

    <title>BMN Business</title>

    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap-grid.min.css" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap-reboot.min.css" />
    <link rel="stylesheet" href="css/index.css" />

</head>

<body>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <a class="navbar-brand" href="#">BMN</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link home_text" href="#"><span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="#">Disabled</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle department_text" href="http://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></a>
                    <div class="dropdown-menu" aria-labelledby="dropdown01">
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </li>
                <li class="nav-item">
                    <input class="form-control" type="text" placeholder="Buscar" aria-label="Buscar">
                </li>
            </ul>


        </div>
    </nav>

    <main role="main">

        <!-- Main jumbotron for a primary marketing message or call to action -->
        <div class="jumbotron">

            <div class="container-fluid">
                <div class="row">
                    <div class="col">
                        <div class="btn-group btn-group-md" style="float: right;">
                            <button type="button" class="btn">Bajas</button>
                            <button type="button" class="btn btn-secondary">Cambios</button>
                            <button type="button" class="btn btn-primary">Altas</button>
                        </div>
                    </div>

                </div>

                <h4 class="title">Carrito</h4>
                <table class="table table-dark table-striped">
                    <thead>
                        <tr>
                            <th>Imagen</th>
                            <th>Producto</th>
                            <th>Precio</th>
                            <th>Cantidad</th>
                            <th>Subtotal</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <img src="images/aceite.jpg" width="60px" class="img-thumbnail" alt="Coke">
                            </td>
                            <td>
                                <p data-toggle="tooltip" data-placement="top" title="PlayStation Controler DualShock4, Magma Red - PlayStation 4 Standard Edition">Aceite Capullo 100% puro de canola 845 ml</p>
                                <small class="text-muted float-left">Aceites de cocina</small>
                                <small class="text-primary float-right delete_item">Eliminar</small>
                            </td>
                            <td>
                                <span class="money_type">$</span>
                                <span class="total_per_unit">27.50</span>
                                <small class="text-primary float-right">Descuento</small>
                            </td>
                            <td>
                                <input class="form-control quantity" type="number" value="1" min="1" style="width: 100px;"></td>
                            <td>
                                <span class="money_type">$</span><span class="subtotal">27.50</span>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <img src="images/coke_600ml.jpg" width="60px" class="img-thumbnail" alt="Coke">
                            </td>
                            <td>
                                <p data-toggle="tooltip" data-placement="top" title="">Refresco Coca Cola botella de 600 ml</p>
                                <small class="text-muted float-left">Refresco</small><small class="text-primary float-right delete_item">Eliminar</small>
                            </td>
                            <td>
                                <span class="money_type">$</span><span class="total_per_unit">13.50</span>
                                <small class="text-primary float-right">Descuento</small>
                            </td>
                            <td><input class="form-control quantity" type="number" value="1" min="1" style="width: 100px;"></td>
                            <td>
                                <span class="money_type">$</span><span class="subtotal">13.50</span>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <img src="images/sabritas.jpg" width="60px" class="img-thumbnail" alt="sabritas">
                            </td>

                            <td>
                                <p data-toggle="tooltip" data-placement="top" title="Papas Ruffles sabor queso 200 g">Papas Ruffles sabor queso 200 g</p>
                                <small class="text-muted float-left">Papas y Frituras</small><small class="text-primary float-right delete_item">Eliminar</small>
                            </td>
                            <td>
                                <span class="money_type">$</span><span class="total_per_unit">38.00</span>
                                <small class="text-primary float-right">Descuento</small>

                            </td>
                            <td><input class="form-control quantity" type="number" value="1" min="1" style="width: 100px;"></td>
                            <td>
                                <span class="money_type">$</span><span class="subtotal">38.00</span>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="row total_block">
                    <div class="col-9">
                        <p class="float-left">Total</p>
                    </div>
                    <div class="col-3">
                        <p class="float-right"><span class="money_type">$</span><span class="total">0</span></p>
                    </div>
                </div>
            </div>
        </div>

        <hr>


    </main>

    <footer class="container">
        <p>&copy; BMN 2017-2018</p>
    </footer>

    <script src="js/jquery/jquery-3.2.1.min.js"></script>
    <script src="js/bootstrap/bootstrap.min.js"></script>
    <script src="js/bootstrap/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function() {
            const business_name = "Amazon";
            const company_name = "BMN";
            const department_text = "Departamentos";
            const categories_text = "Categorias";
            const home_text = "Inicio";

            $(".business_name").text(business_name);
            $(".category_text").text(categories_text);
            $(".department_text").text(department_text);
            $(".home_text").text(home_text);

        })

        $(document).on('keyup mouseup', '.quantity', function() {

            getSubtotalPerQuantity($(this));
            getTotalSale($(this).closest('table'));
        });

        $(document).on('click', '.delete_item', function() {

            var cart = $(this).closest('table');
            var block = $(this).closest('tr');
            block.remove();
            getTotalSale(cart);

        });

        function getSubtotalPerQuantity(item) {

            var parent = item.closest('tr');
            var subtotal = parent.find(".subtotal");
            var total_per_unit = parent.find(".total_per_unit");
            var final_subtotal = (Number(total_per_unit.text().replace(",", "")) * item.val()).toFixed(2);
            subtotal.text(final_subtotal);

        }

        function getTotalSale(cart) {

            console.log(cart.length);
            var total = $(".total");
            var subtotals = cart.find(".subtotal");
            var sum = 0;
            subtotals.each(function() {
                sum += Number($(this).text().replace(",", ""));

            })
            total.text(sum.toFixed(2));

        }
    </script>

    <!-- poner ofertas de 2 por uno -->
    <!-- ver los de kilos en azucar -->
    <!-- productos por
medida liquida
medida gramos
tamaÃ±o nuevo codigo de barras
tallas
numeracion -->
</body>

</html>